<!DOCTYPE html>
<html>
  <head>
    <title>Auto Refresh Settings</title>
    <meta charset="UTF-8" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <!-- Remove translations.js -->
    <!-- <script src="translations.js"></script> -->
    <script src="resource-checker.js"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Noto+Sans:wght@400;500;600&family=Noto+Sans+SC&family=Noto+Sans+JP&family=Noto+Sans+KR&family=Noto+Sans+Arabic&family=Noto+Sans+Thai&family=Noto+Sans+Hebrew&family=Noto+Sans+Devanagari&display=swap"
      rel="stylesheet"
    />
    <style>
      :root {
        --primary-color: #81b622;
        --primary-hover: #699913;
        --success-color: #699913;
        --bg-color: #fafafa;
        --card-bg: #ffffff;
        --text-color: #333;
        --muted-text: #666;
        --border-color: #e0e0e0;
        --border-radius: 8px;
        --shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        --transition: all 0.3s ease;
      }

      /* Dark mode variables */
      .dark-mode {
        --primary-color: #9fce4c;
        --primary-hover: #b5da6e;
        --success-color: #81b622;
        --bg-color: #1a1a1a;
        --card-bg: #2d2d2d;
        --text-color: #f0f0f0;
        --muted-text: #b0b0b0;
        --border-color: #444;
        --shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
      }

      body {
        font-family: "Inter", sans-serif;
        font-optical-sizing: auto;
        font-weight: 400;
        font-style: normal;
        width: 100%;
        max-width: 700px;
        padding: 24px;
        margin: 0 auto;
        background-color: var(--bg-color);
        color: var(--text-color);
        line-height: 1.5;
        transition: var(--transition);
      }

      h1 {
        margin-top: 0;
        font-size: 24px;
        font-weight: 600;
        display: flex;
        align-items: center;
        color: var(--primary-color);
        margin-bottom: 24px;
        position: relative;
      }

      h2 {
        font-size: 18px;
        font-weight: 600;
        margin-top: 0;
        margin-bottom: 16px;
        color: var(--primary-color);
      }

      h3 {
        font-size: 16px;
        font-weight: 500;
        margin-top: 0;
        margin-bottom: 12px;
        color: var(--text-color);
      }

      .settings-group {
        margin-bottom: 24px;
        padding: 20px;
        border-radius: var(--border-radius);
        background-color: var(--card-bg);
        box-shadow: var(--shadow);
        transition: var(--transition);
      }

      .settings-group:hover {
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
      }

      .settings-item {
        margin-bottom: 16px;
        position: relative;
      }

      .settings-item:last-child {
        margin-bottom: 0;
      }

      label {
        display: block;
        margin-bottom: 8px;
        font-weight: 500;
        font-size: 14px;
      }

      .checkbox-label {
        display: flex;
        align-items: center;
        cursor: pointer;
        font-weight: 400;
      }

      input[type="checkbox"] {
        margin-right: 10px;
        width: 16px;
        height: 16px;
        accent-color: var(--primary-color);
        cursor: pointer;
      }

      input[type="number"] {
        width: 80px;
        padding: 8px 12px;
        border: 1px solid var(--border-color);
        border-radius: 4px;
        font-size: 14px;
        background-color: var(--card-bg);
        color: var(--text-color);
        transition: var(--transition);
      }

      input[type="number"]:focus {
        border-color: var(--primary-color);
        outline: none;
        box-shadow: 0 0 0 2px rgba(129, 182, 34, 0.2);
      }

      select,
      input[type="text"] {
        width: 100%;
        padding: 10px 12px;
        border: 1px solid var(--border-color);
        border-radius: 4px;
        font-size: 14px;
        box-sizing: border-box;
        background-color: var(--card-bg);
        color: var(--text-color);
        transition: var(--transition);
      }

      select:focus,
      input[type="text"]:focus {
        border-color: var(--primary-color);
        outline: none;
        box-shadow: 0 0 0 2px rgba(129, 182, 34, 0.2);
      }

      .button-row {
        display: flex;
        justify-content: flex-end;
        margin-top: 20px;
        gap: 12px;
      }

      button {
        padding: 10px 16px;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        font-weight: 500;
        font-size: 14px;
        transition: var(--transition);
      }

      button:hover {
        transform: translateY(-1px);
      }

      button:active {
        transform: translateY(1px);
      }

      button.primary {
        background-color: var(--primary-color);
        color: white;
      }

      button.primary:hover {
        background-color: var(--primary-hover);
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
      }

      button.secondary {
        background-color: var(--border-color);
        color: var(--text-color);
      }

      button.secondary:hover {
        background-color: #d0d0d0;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
      }

      button.icon-button {
        padding: 8px;
        width: 36px;
        height: 36px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 50%;
        background-color: transparent;
      }

      .status {
        margin-top: 16px;
        padding: 12px;
        border-radius: 4px;
        display: none;
        font-size: 14px;
      }

      .status.success {
        display: block;
        background-color: rgba(129, 182, 34, 0.1);
        color: var(--success-color);
        border-left: 4px solid var(--primary-color);
      }

      .status.error {
        display: block;
        background-color: rgba(220, 53, 69, 0.1);
        color: #dc3545;
        border-left: 4px solid #dc3545;
      }

      .hint-text {
        font-size: 12px;
        color: var(--muted-text);
        margin-top: 6px;
        font-style: italic;
      }

      .tooltip {
        position: relative;
        display: inline-block;
        margin-left: 6px;
        color: var(--muted-text);
        font-size: 14px;
        cursor: help;
      }

      .tooltip-text {
        visibility: hidden;
        width: 220px;
        background-color: #555;
        color: #fff;
        text-align: left;
        border-radius: 6px;
        padding: 8px 12px;
        position: absolute;
        z-index: 1;
        bottom: 125%;
        left: 50%;
        transform: translateX(-50%);
        opacity: 0;
        transition: opacity 0.3s;
        font-size: 12px;
        font-style: normal;
        font-weight: normal;
        line-height: 1.4;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
      }

      .tooltip:hover .tooltip-text {
        visibility: visible;
        opacity: 1;
      }

      .tooltip-text::after {
        content: "";
        position: absolute;
        top: 100%;
        left: 50%;
        margin-left: -5px;
        border-width: 5px;
        border-style: solid;
        border-color: #555 transparent transparent transparent;
      }

      /* Grid layout for better organize settings */
      .settings-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
        gap: 16px;
      }

      /* Enhanced tabs navigation */
      .tabs-container {
        margin-bottom: 20px;
        border-bottom: 1px solid var(--border-color);
      }

      .tabs-nav {
        display: flex;
        overflow-x: auto;
        scrollbar-width: thin;
      }

      .tabs-nav::-webkit-scrollbar {
        height: 4px;
      }

      .tabs-nav::-webkit-scrollbar-thumb {
        background-color: var(--border-color);
        border-radius: 4px;
      }

      .tab-button {
        padding: 12px 16px;
        background: transparent;
        border: none;
        border-bottom: 2px solid transparent;
        color: var(--muted-text);
        cursor: pointer;
        font-weight: 500;
        transition: var(--transition);
        white-space: nowrap;
      }

      .tab-button:hover {
        color: var(--text-color);
      }

      .tab-button.active {
        color: var(--primary-color);
        border-bottom: 2px solid var(--primary-color);
        transform: translateY(0);
      }

      .tab-content {
        display: none;
      }

      .tab-content.active {
        display: block;
        animation: fadeIn 0.3s ease-in-out;
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(5px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      /* Sound selection section */
      .sound-options {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
        gap: 10px;
        margin-top: 10px;
      }

      .sound-option {
        padding: 10px;
        border: 1px solid var(--border-color);
        border-radius: var(--border-radius);
        cursor: pointer;
        transition: var(--transition);
        display: flex;
        align-items: center;
      }

      .sound-option:hover {
        background-color: rgba(129, 182, 34, 0.1);
      }

      .sound-option.selected {
        background-color: rgba(129, 182, 34, 0.15);
        border-color: var(--primary-color);
      }

      .sound-option input[type="radio"] {
        margin-right: 8px;
        accent-color: var(--primary-color);
      }

      /* Support and donation */
      .custom-coffee-button {
        text-decoration: none;
        display: inline-block;
        padding: 12px 18px;
        background-color: #ffdd00;
        color: #000;
        border-radius: 6px;
        font-weight: 600;
        transition: var(--transition);
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
      }

      .custom-coffee-button:hover {
        background-color: #ffe44d;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
        transform: translateY(-2px);
      }

      .coffee-button-content {
        display: flex;
        align-items: center;
        justify-content: center;
      }

      /* Theme toggle */
      .theme-toggle {
        position: absolute;
        right: 0;
        top: 5px;
        background-color: var(--card-bg);
        border: 1px solid var(--border-color);
        cursor: pointer;
        width: 48px;
        height: 48px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        box-shadow: var(--shadow);
        transition: var(--transition);
      }

      .theme-toggle:hover {
        background-color: rgba(129, 182, 34, 0.1);
        transform: translateY(-2px);
      }

      .dark-mode .theme-toggle:hover {
        background-color: rgba(159, 206, 76, 0.15);
      }

      /* Legal links */
      .legal-links {
        margin-top: 30px;
        text-align: center;
        font-size: 12px;
        color: var(--muted-text);
      }

      .legal-links a {
        color: var(--muted-text);
        text-decoration: none;
        transition: var(--transition);
        margin: 0 8px;
      }

      .legal-links a:hover {
        color: var(--primary-color);
        text-decoration: underline;
      }

      /* Settings validation */
      input:invalid {
        border-color: #dc3545;
      }

      .validation-message {
        color: #dc3545;
        font-size: 12px;
        margin-top: 4px;
        display: none;
      }

      input:invalid + .validation-message {
        display: block;
      }

      /* Notification banner */
      .notification-banner {
        position: fixed;
        top: 20px;
        left: 50%;
        transform: translateX(-50%);
        padding: 12px 16px;
        border-radius: 6px;
        background-color: var(--card-bg);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        z-index: 100;
        display: flex;
        align-items: center;
        max-width: 350px;
        animation: slideInDown 0.3s ease forwards;
        border-left: 4px solid var(--primary-color);
      }

      @keyframes slideInDown {
        from {
          transform: translate(-50%, -20px);
          opacity: 0;
        }
        to {
          transform: translate(-50%, 0);
          opacity: 1;
        }
      }
    </style>
  </head>
  <body>
    <h1>
      <img
        src="icons/settings-gear.svg"
        width="28"
        height="28"
        alt="Settings"
        style="margin-right: 12px"
      />
      <span>Auto Refresh Settings</span>
      <button
        id="themeToggle"
        class="theme-toggle"
        aria-label="Toggle dark mode"
      >
        <svg
          id="darkIcon"
          width="20"
          height="20"
          viewBox="0 0 24 24"
          style="display: block"
        >
          <path
            fill="currentColor"
            d="M11.0174 2.80157C6.37072 3.29221 2.75 7.22328 2.75 12C2.75 17.1086 6.89137 21.25 12 21.25C16.7767 21.25 20.7078 17.6293 21.1984 12.9826C19.8717 14.6669 17.8126 15.75 15.5 15.75C11.4959 15.75 8.25 12.5041 8.25 8.5C8.25 6.18738 9.33315 4.1283 11.0174 2.80157ZM1.25 12C1.25 6.06294 6.06294 1.25 12 1.25C12.7166 1.25 13.0754 1.82126 13.1368 2.27627C13.196 2.71398 13.0342 3.27065 12.531 3.57467C10.8627 4.5828 9.75 6.41182 9.75 8.5C9.75 11.6756 12.3244 14.25 15.5 14.25C17.5882 14.25 19.4172 13.1373 20.4253 11.469C20.7293 10.9658 21.286 10.804 21.7237 10.8632C22.1787 10.9246 22.75 11.2834 22.75 12C22.75 17.9371 17.9371 22.75 12 22.75C6.06294 22.75 1.25 17.9371 1.25 12Z"
            transform="translate(0 -3)"
          />
        </svg>
        <svg
          id="lightIcon"
          width="20"
          height="20"
          viewBox="0 0 24 24"
          style="display: none"
        >
          <path
            fill="white"
            d="M12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.65 0-3 1.35-3 3s1.35 3 3 3 3-1.35 3-3-1.35-3-3-3zM11 3V1h2v2h-2zm0 19v-2h2v2h-2zM3.515 5.636L4.929 4.222l1.414 1.414L4.93 7.05 3.515 5.636zm15.556 12.728l-1.414 1.414-1.414-1.414 1.414-1.414 1.414 1.414zM5.636 20.485l-1.414-1.414 1.414-1.414 1.414 1.414-1.414 1.414zM18.364 3.515l1.414 1.414-1.414 1.414-1.414-1.414 1.414-1.414zM23 11v2h-2v-2h2zM3 11v2H1v-2h2z"
          />
        </svg>
      </button>
    </h1>

    <!-- Tabs navigation -->
    <div class="tabs-container">
      <div class="tabs-nav">
        <button id="generalTab" class="tab-button active" data-tab="general">
          General
        </button>
        <button id="displayTab" class="tab-button" data-tab="display">
          Display & Appearance
        </button>
        <button id="behaviorTab" class="tab-button" data-tab="behavior">
          Refresh Behavior
        </button>
        <button id="advancedTab" class="tab-button" data-tab="advanced">
          Advanced
        </button>
        <button id="aboutTab" class="tab-button" data-tab="about">About</button>
      </div>
    </div>

    <!-- General Settings Tab -->
    <div id="general" class="tab-content active">
      <div class="settings-group">
        <h2>General Settings</h2>

        <div class="settings-item">
          <label>Default Refresh Interval</label>
          <div style="display: flex; align-items: center; gap: 10px">
            <input
              type="number"
              id="defaultInterval"
              min="1"
              max="86400"
              value="30"
              required
            />
            <span>seconds</span>
          </div>
          <div class="hint-text">
            Starting value for new refresh tasks (1 - 86400 seconds)
          </div>
          <div class="validation-message">
            Please enter a value between 1 and 86400
          </div>
        </div>

        <div class="settings-item">
          <label class="checkbox-label">
            <input type="checkbox" id="startupRefreshMode" />
            <span>Remember refresh mode</span>
            <span class="tooltip">
              ?
              <span class="tooltip-text">
                Automatically restore your last used refresh mode for each tab
                when you reopen it
              </span>
            </span>
          </label>
        </div>

        <div class="settings-item">
          <label class="checkbox-label">
            <input type="checkbox" id="showNotifications" />
            <span>Show notifications</span>
            <span class="tooltip">
              ?
              <span class="tooltip-text">
                Display notifications when auto-refresh is active and when pages
                are refreshed
              </span>
            </span>
          </label>
        </div>
      </div>
    </div>

    <!-- Display & Appearance Tab -->
    <div id="display" class="tab-content">
      <div class="settings-group">
        <h2>Display Settings</h2>

        <div class="settings-item">
          <label>Theme</label>
          <select id="themeSelector">
            <option value="system">System Default</option>
            <option value="light">Light Mode</option>
            <option value="dark">Dark Mode</option>
          </select>
          <div class="hint-text">Choose how the extension looks</div>
        </div>

        <div class="settings-item">
          <h3>Sound Effects</h3>

          <div class="settings-item">
            <label class="checkbox-label">
              <input type="checkbox" id="enableSoundEffects" />
              <span>Play sound effects</span>
              <span class="tooltip">
                ?
                <span class="tooltip-text">
                  Play a sound when the page is refreshed
                </span>
              </span>
            </label>
          </div>

          <div class="settings-item">
            <label class="checkbox-label">
              <input type="checkbox" id="enableTickingSound" />
              <span>Play ticking sound during countdown</span>
              <span class="tooltip">
                ?
                <span class="tooltip-text">
                  Play a clock ticking sound while waiting for the next refresh
                </span>
              </span>
            </label>
          </div>

          <div
            id="tickingSoundOptions"
            class="settings-item"
            style="display: none"
          >
            <label>Select ticking sound</label>
            <div class="sound-options">
              <label class="sound-option">
                <input
                  type="radio"
                  name="tickingSound"
                  value="ticking_1.mp3"
                  checked
                />
                <span>Classic</span>
              </label>
              <label class="sound-option">
                <input type="radio" name="tickingSound" value="ticking_2.mp3" />
                <span>Digital</span>
              </label>
              <label class="sound-option">
                <input type="radio" name="tickingSound" value="ticking_3.mp3" />
                <span>Gentle</span>
              </label>
              <label class="sound-option">
                <input type="radio" name="tickingSound" value="ticking_4.mp3" />
                <span>Mechanical</span>
              </label>
              <label class="sound-option">
                <input type="radio" name="tickingSound" value="ticking_5.mp3" />
                <span>Soft</span>
              </label>
            </div>
            <div style="margin-top: 10px">
              <button
                id="previewSound"
                class="secondary"
                style="padding: 6px 12px"
              >
                Preview Sound
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Refresh Behavior Tab -->
    <div id="behavior" class="tab-content">
      <div class="settings-group">
        <h2>Refresh Behavior</h2>

        <div class="settings-item">
          <label class="checkbox-label">
            <input type="checkbox" id="confirmRefresh" />
            <span>Form data protection</span>
            <span class="tooltip">
              ?
              <span class="tooltip-text">
                Ask for confirmation before refreshing pages with unsaved form
                data
              </span>
            </span>
          </label>
        </div>

        <div class="settings-item">
          <label class="checkbox-label">
            <input type="checkbox" id="skipErrorPages" />
            <span>Skip error pages</span>
            <span class="tooltip">
              ?
              <span class="tooltip-text">
                If a page loads with an error (like 404 or 500 status codes),
                try refreshing again immediately
              </span>
            </span>
          </label>
        </div>

        <div class="settings-item">
          <label class="checkbox-label">
            <input type="checkbox" id="pauseOnFocus" />
            <span>Pause countdown when tab is active</span>
            <span class="tooltip">
              ?
              <span class="tooltip-text">
                When enabled, the auto-refresh countdown will pause when you're
                actively viewing the tab
              </span>
            </span>
          </label>
        </div>

        <div class="settings-item">
          <label class="checkbox-label">
            <input type="checkbox" id="smartRefresh" />
            <span>Smart refresh</span>
            <span class="tooltip">
              ?
              <span class="tooltip-text">
                Auto-adjust refresh rate based on network conditions and page
                load times
              </span>
            </span>
          </label>
        </div>
      </div>
    </div>

    <!-- Advanced Tab -->
    <div id="advanced" class="tab-content">
      <div class="settings-group">
        <h2>Advanced Options</h2>

        <div class="settings-item">
          <label class="checkbox-label">
            <input type="checkbox" id="enableResourceMonitoring" />
            <span>Enable resource monitoring</span>
            <span class="tooltip">
              ?
              <span class="tooltip-text">
                Track changes to CSS/JS resources and refresh when they're
                updated. Useful for web development.
              </span>
            </span>
          </label>
        </div>

        <div class="settings-item">
          <label>Resource Check Interval</label>
          <div style="display: flex; align-items: center; gap: 10px">
            <input
              type="number"
              id="resourceCheckInterval"
              min="1"
              max="60"
              value="5"
              required
            />
            <span>seconds</span>
          </div>
          <div class="hint-text">
            How often to check if resources have been updated (1-60 seconds)
          </div>
          <div class="validation-message">
            Please enter a value between 1 and 60
          </div>
        </div>

        <div class="settings-item">
          <label class="checkbox-label">
            <input type="checkbox" id="blockAds" />
            <span>Block ads during refresh</span>
            <span class="tooltip">
              ?
              <span class="tooltip-text">
                Try to prevent ad scripts from reloading during page refresh
                (may not work on all sites)
              </span>
            </span>
          </label>
        </div>

        <div class="settings-item">
          <label class="checkbox-label">
            <input type="checkbox" id="developerMode" />
            <span>Developer mode</span>
            <span class="tooltip">
              ?
              <span class="tooltip-text">
                Enable extended logging and developer features
              </span>
            </span>
          </label>
        </div>
      </div>
    </div>

    <!-- About Tab -->
    <div id="about" class="tab-content">
      <div class="settings-group">
        <h2>About Auto Refresh</h2>
        <div style="display: flex; align-items: center; margin-bottom: 16px">
          <img
            src="icons/icon48.png"
            width="48"
            height="48"
            style="margin-right: 16px"
            alt="Auto Refresh Icon"
          />
          <div>
            <div style="font-weight: 600; font-size: 18px">Auto Refresh</div>
            <div style="font-size: 14px; color: var(--muted-text)">
              Version 1.5.0
            </div>
          </div>
        </div>

        <p>
          Auto Refresh automatically refreshes web pages at custom intervals or
          based on specific conditions.
        </p>

        <div style="margin-top: 20px">
          <h3>Features</h3>
          <ul>
            <li>Set custom refresh intervals</li>
            <li>Conditional refreshing based on page content</li>
            <li>Smart resource monitoring for developers</li>
            <li>Form data protection</li>
            <li>Sound notifications and visual indicators</li>
          </ul>
        </div>

        <div style="margin-top: 16px">
          <a
            href="feedback.html"
            class="secondary"
            style="text-decoration: none; color: var(--primary-color)"
          >
            Report a Bug or Request a Feature
          </a>
        </div>
      </div>

      <div class="settings-group donation-section">
        <h2>Support Development</h2>

        <p style="margin-bottom: 20px">
          Love Auto Refresh? Consider supporting future development by buying me
          a coffee!
        </p>

        <div style="text-align: center; margin: 20px 0">
          <a
            href="https://www.buymeacoffee.com/nxan2911i"
            target="_blank"
            class="custom-coffee-button"
          >
            <div class="coffee-button-content">
              <img
                src="icons/coffee-cup.svg"
                width="20"
                height="20"
                alt="Coffee cup icon"
              />
              <span style="margin-left: 8px">Buy me a coffee</span>
            </div>
          </a>
        </div>
      </div>
    </div>

    <!-- Auto-switching ads container -->
    <div id="ad-rotation-container">
      <!-- Will be populated by monetization.js with auto-switching ads -->
    </div>

    <div class="button-row">
      <button id="resetButton" class="secondary">Reset to Defaults</button>
      <button id="saveButton" class="primary">Save Settings</button>
    </div>

    <div id="statusMessage" class="status"></div>

    <!-- Add legal links -->
    <div class="legal-links">
      <a href="terms.html">Terms of Service</a> |
      <a href="privacy.html">Privacy Policy</a> |
    </div>

    <link rel="stylesheet" href="ad-styles.css" />
    <script src="settings.js"></script>
    <script type="module" src="monetization.js"></script>
  </body>
</html>
